<app-palette
  [theme]="themes[themeName]"
  [(active)]="isOpenPalette"
  (changeColor)="onChangeColor($event)"
  (apply)="createCustomTheme($event)"
  (cancel)="onCancel()"
  >
</app-palette>

<app-side-menu #sideMenu side="left">
  <app-fretboard-settings [settings]="settings"></app-fretboard-settings>
</app-side-menu>

<div class="section flex-align-center">
  <div class="form-field">
    <button mat-mini-fab isRoundButton="true" matTooltip="Settings" (click)="sideMenu.toggle();">
      <mat-icon>settings</mat-icon>
    </button>
  </div>

  <div class="form-field">
    <button
      (click)="openPalette()"
      isRoundButton="true"
      matTooltip="Create new theme"
      mat-mini-fab
    >
      <mat-icon>palette</mat-icon>
    </button>
  </div>

  <div class="form-field">
    <mat-form-field style="width: 100px;">
      <mat-label>Theme</mat-label>
      <mat-select [(ngModel)]="themeName" (selectionChange)="onChangeTheme($event.value)" name="theme">
        <mat-option *ngFor="let theme of themeOptions" [value]="theme.value">
          {{theme.label}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div class="form-field">
    <mat-form-field style="width: 200px;">
      <mat-label>Scales</mat-label>
      <mat-select [(ngModel)]="scaleSequence" (selectionChange)="onChangeScale($event.value)" name="scale">
        <mat-option *ngFor="let sequence of sequenceOptions" [value]="sequence.value">
          {{sequence.label}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div class="form-field">
    <mat-radio-group [(ngModel)]="scaleMode" (change)="onChangeScaleMode()" aria-label="Select pattern">
      <mat-radio-button  *ngFor="let mode of scaleModes" [value]="mode.value">
        {{mode.name}}
      </mat-radio-button>
    </mat-radio-group>
  </div>
</div>

<div class="fretboard">
  <div class="canvas-wrapper" [style.height.px]="canvasHeight$ | async">
    <canvas #fretLayer class="canvas"></canvas>
    <canvas #noteLayer class="canvas"></canvas>
  </div>
</div>
